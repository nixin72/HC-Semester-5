<!DOCTYPE html">
<html>

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Easy AJAX</title>

</head>

<body>
<form name='myForm'>
	<p>Name: <input type='text' name='username' id="username"/><br/>
	Time: <input type='text' id='time' name='time'/></p>
</form>
</body>
<script>
var doRequest = function() {
	try {
		var request = new XMLHttpRequest();
	} catch(err) {
		console.log('Error creating object: ', err);
		return;
	}
//	request.onreadystatechange = function() {
//		if(request.readyState == 4){
//			document.getElementById("time").value = request.responseText;
//		}
//	}
	request.addEventListener('readystatechange', function() {
		if(request.readyState == 4){
			document.getElementById("time").value = request.responseText;
		}
	});
	request.open("GET", "servertime.php", true);
	request.send(); 
}

var el = document.getElementById("username");

el.addEventListener('change', doRequest);

</script>

</html>